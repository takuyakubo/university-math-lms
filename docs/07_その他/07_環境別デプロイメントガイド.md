# 環境別デプロイメントガイド

本ドキュメントでは、大学生向け数学特化型学習管理システム（LMS）の各環境へのデプロイ方法について説明します。

## 環境の種類

本システムは以下の環境で運用されます：

- 開発環境: 開発者が新機能開発やバグ修正を行う環境
- テスト環境: QAや動作検証を行う環境
- ステージング環境: 本番リリース前の最終確認を行う環境
- 本番環境: 実際のユーザーがアクセスする環境

## 共通設定

すべての環境で共通の設定手順は以下の通りです：

1. リポジトリのクローン
2. 必要なパッケージのインストール
3. 環境変数の設定
4. データベースのセットアップ

## 環境別設定

### 開発環境

- URL: `dev.math-lms.university.edu`
- 自動デプロイ: なし（手動デプロイ）
- ブランチ: 任意の開発ブランチ

### テスト環境

- URL: `test.math-lms.university.edu`
- 自動デプロイ: develop ブランチへのマージ時
- ブランチ: develop

### ステージング環境

- URL: `staging.math-lms.university.edu`
- 自動デプロイ: main ブランチへのマージ時
- ブランチ: main

### 本番環境

- URL: `math-lms.university.edu`
- 自動デプロイ: リリースタグの作成時
- ブランチ: main（リリースタグ付き）

## デプロイ手順

### 手動デプロイ（開発環境向け）

```
# 詳細な手順はコード例として別ドキュメントに記載
```

### 自動デプロイ設定

自動デプロイはGitHub Actionsを使用して構成されています。設定は `.github/workflows/` ディレクトリ内のYAMLファイルで定義されています。

## 環境別の考慮事項

### 大学のネットワーク要件

- 学内ネットワークからのアクセス制限
- VPN経由でのアクセス方法
- キャンパスごとのネットワーク設定の違い

### 学期スケジュールの考慮

- 学期開始前の大規模アップデートのタイミング
- 試験期間中のメンテナンス制限
- 長期休暇中のシステム更新ウィンドウ

## トラブルシューティング

デプロイ中に発生する可能性のある一般的な問題とその解決策：

1. データベース接続エラー
2. 環境変数の不足
3. 依存パッケージの互換性問題

各問題の詳細な解決方法は「10_トラブルシューティング.md」を参照してください。
