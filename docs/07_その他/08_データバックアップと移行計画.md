# データバックアップと移行計画

本ドキュメントでは、大学生向け数学特化型学習管理システム（LMS）のデータバックアップ戦略と移行計画について説明します。

## バックアップ戦略

### バックアップの種類

1. **完全バックアップ**: すべてのデータを含む
   - 頻度: 週1回（日曜日）
   - 保持期間: 6か月

2. **差分バックアップ**: 最後の完全バックアップ以降の変更
   - 頻度: 毎日
   - 保持期間: 1か月

3. **トランザクションログ**: リアルタイムの変更記録
   - 頻度: 1時間ごと
   - 保持期間: 1週間

### バックアップ対象

- データベース（MySQL）
- ユーザーアップロードファイル
- システム設定ファイル
- ログファイル

### 学期に基づくバックアップスケジュール

- **学期終了時**: アーカイブ用完全バックアップ（永続保存）
- **試験期間中**: バックアップ頻度の増加（差分バックアップを6時間ごとに実施）
- **長期休暇中**: 通常のバックアップスケジュール

## リストア手順

### 緊急リストア（24時間以内のデータ）

1. 最新のトランザクションログバックアップの適用
2. 必要に応じて差分バックアップの適用
3. サービスの再起動と整合性確認

### 完全リストア

1. 最新の完全バックアップのリストア
2. 差分バックアップの順次適用
3. トランザクションログの適用
4. データ整合性の検証
5. サービスの再起動

## データ移行計画

### バージョンアップグレード時の移行

1. 事前検証環境でのスキーマ移行テスト
2. 完全バックアップの取得
3. ダウンタイムの通知
4. スキーマ更新の適用
5. データ変換スクリプトの実行
6. 整合性検証
7. 新バージョンへの切り替え

### 他システムからの移行

1. 移行元データの抽出と変換仕様の定義
2. 変換スクリプトの作成と検証
3. テスト環境での移行テスト
4. 本番移行スケジュールの策定
5. 移行作業の実施
6. データ検証

## バックアップ保管場所

1. **オンサイトストレージ**: 大学データセンター内（即時アクセス用）
2. **オフサイトストレージ**: 災害復旧用（別キャンパスのデータセンター）
3. **クラウドストレージ**: 重要データの暗号化バックアップ

## 責任者と連絡先

- **バックアップ運用責任者**: システム管理部門長
- **データ復旧責任者**: データベース管理者
- **緊急連絡先**: 緊急対応チーム（24時間対応）

## 定期検証と訓練

- 四半期ごとのリストアテスト
- 年1回の災害復旧訓練
- バックアップ成功率の月次レポート作成
